from homescreen import *
from menu import *
from tkinter import *
from modify_data import *
import time

MENU_ITEMS = ("Update Login", "Delete Login", "Portrait View", "Landscape View", "View All", "Tutorial", "FAQ")
DISABLE_STATE = ("Update Login", "Delete Login", "View All")

def make_menu(self, menu_tab, start, end, tf, cmd):
        tab = Menu(self.menu_bar, tearoff=False)
        count = 0

        try:
            read_data()
        except FileNotFoundError:
            for item in MENU_ITEMS[slice(start, end)]:
                count += 1
                if tf and count == 2:
                    tab.add_separator()
                if item in DISABLE_STATE:
                    tab.add_command(label=item, command=cmd, state=DISABLED)
                else:
                    tab.add_command(label=item, command=cmd)
        else:
            for item in MENU_ITEMS[slice(start, end)]:
                count += 1
                if tf and count == 2:
                    tab.add_separator()
            tab.add_command(label=item, command=cmd)
        finally:
            self.menu_bar.add_cascade(label=menu_tab, menu=tab)
            self.change_state()


    def change_state(self):
        try:
            read_data()
        except FileNotFoundError:
            print("state remains disabled")
        else:
            self.edit_menu.entryconfig("Update Login", state="normal")
            self.edit_menu.entryconfig("Delete Login", state="normal")
            self.view_menu.entryconfig("View All", state="normal")

# Root Window & Main Frame
app = AppWindow("Account Simple  4.0")
frame = AppFrame(app)
MenuBar(app, frame.update_login)

# TODO #1: Create a Menu bar for Root Window
# menu_bar = Menu(app)
# app.config(menu=menu_bar)

# Menu bar tabs
# make_menu("Edit", 0, 2, False, frame.update_login)
# make_menu("View", 2, 5, True, frame.update_login)
# make_menu("Help", 5, 8, False, frame.update_login)
# # menu_bar.delete("Edit")

app.mainloop()
